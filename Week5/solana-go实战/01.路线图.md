# Solana 链交互速成路线（6小时版）

## 环境准备（1小时）
- 安装必要工具链
  ```bash
  # Solana CLI
  sh -c "$(curl -sSfL https://release.solana.com/stable/install)"
  
  # Go 绑定生成工具
  go install github.com/portto/solana-go-sdk/abigen@latest
  ```
- 初始化 Go 项目
  ```bash
  go mod init solana-interactor
  go get github.com/portto/solana-go-sdk@v1.25.0
  ```

## 核心链操作（3小时）
### 区块链读写
1. 查询区块数据
   ```go
   client := solana.NewRPCClient("https://api.devnet.solana.com")
   block, _ := client.GetBlock(context.Background(), 12345)
   ```

2. 交易全流程
   ```go
   // 创建交易
   tx, _ := solana.NewTransaction(
       []solana.Instruction{system.NewTransferInstruction(...)},
       recentBlockhash,
       solana.TransactionPayer(payer.PublicKey),
   )
   
   // 签名发送
   sig, _ := client.SendTransactionWithOpts(context.Background(), tx, rpc.TransactionOpts{
       SkipPreflight: false
   })
   ```

### 合约部署
1. 生成Go绑定代码
   ```bash
   abigen --sol Token.sol --pkg token --out token.go
   ```

2. 部署智能合约
   ```go
   contractBin, _ := ioutil.ReadFile("Token.so")
   txHash, _ := client.DeployContract(
       context.Background(),
       owner.PrivateKey,
       contractBin,
       rpc.DeployContractOpts{GasLimit: 5000000}
   )
   ```

## 高级集成（2小时）
### 事件订阅
```go
wsClient, _ := websocket.Connect("wss://api.devnet.solana.com")
sub, _ := wsClient.LogsSubscribeMatching("mentionsProgramId123")

for {
    event := <-sub.Channel()
    fmt.Printf("New log: %+v\n", event.Value)
}
```

### 日志解析
```go
type TransferEvent struct {
    From   common.Address
    To     common.Address 
    Amount *big.Int
}

func parseLog(log string) {
    event := new(TransferEvent)
    abi.Unpack(event, "Transfer", log.Data)
}
```

## 学习验收标准
✅ 能部署自定义ERC-20合约到DevNet  
✅ 实现余额查询+代币转账交易  
✅ 实时监听链上事件并解析
```
